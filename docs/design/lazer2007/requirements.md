# 要件定義（Lazer2007 モデル再現）

## 0. 背景とゴール
- **ゴール1**: Lazer & Friedman (2007) のネットワーク × 探索/活用ダイナミクスを NK モデル上で再現できるシミュレーションエンジンを構築する。
- **ゴール2**: 同エンジンを用いて協力ゲームの特性関数 \(v:2^N \to \mathbb{R}\) を計算し、貢献度指標（Shapley値など）に利用できるゲームテーブルを出力する。
- **前提**: 「NKモデル採用報告書」で定義したレイヤ構造（環境/エージェント/ネットワーク/ダイナミクス/ゲーム化）を踏襲し、将来的なマイナーチェンジ・拡張（skill差、相性、別論文設定）に耐える設計とする。

## 1. 機能要件
1. NKランドスケープ生成
   - N, K, 依存関係、スコアテーブルを扱える標準 NK モデルを提供する。
   - skill バイアスや conflict pairs などの非対称性を挿入できるフックを用意する。
2. エージェント & タスク割当
   - 各エージェントに担当ビット集合、skill、役割名を持たせる。
   - 標準ケースは 1 エージェント = 1 ビットだが、多ビット担当も表現できる。
3. ネットワーク生成
   - LINE/COMPLETE/RANDOM/SMALL_WORLD など複数のネットワークタイプをサポートする。
4. 探索・活用ダイナミクスのシミュレーション
   - Lazer-Friedman 基本ルール（模倣＋探索、velocity、error）を再現する。
   - 履歴、最良スコア、最終スコア等のメトリクスを取得できる。
5. ゲームテーブル生成
   - 任意の提携 S ⊆ N に対し、サブネットワーク方式でシミュレーションして v(S) を算出する。
   - 繰り返し試行による平均・分散を記録し、CSV などでエクスポートできる。
6. Lazer-Friedman「純正」設定プリセット
   - 論文設定（N=#agents、skillなし、conflictなし）を再現可能とする。

## 2. 非機能要件
- **再利用性**: レイヤごとの独立した Python モジュールで構成し、別論文設定にも流用できる API を提供する。
- **再現性**: 乱数種を固定できる引数を整備し、シミュレーション結果を再現可能にする。
- **可観測性**: ログ/結果データを `outputs/` 以下に保存し、分析ノートブック等から利用できるようにする。
- **拡張性**: skill_profile の種類追加、ネットワークジェネレータ追加、評価プロトコル追加を最小限の変更で実現できる。

## 3. 制約条件
- 実装言語: Python 3.11+ を想定。
- サードパーティ: `numpy`, `networkx`, `pandas` を許容（必要に応じて requirements で管理）。
- プレイヤー数は 12 程度までを想定し、提携全列挙による計算量を考慮する。

## 4. 受入基準
- 参照論文の基本挙動（LINE vs COMPLETE ネットワーク、探索・模倣ルール）の差異を確認できるシナリオを再現できる。
- ゲームテーブル CSV が生成され、Shapley 値等の入力として利用できる最小構成のサンプルが `outputs/` に保存される。
- 設計文書（本ファイル + 基本設計 + 詳細設計）とコードが一貫している。

## 5. 実世界での解釈（プレイヤーと v(S)）

- プレイヤ = 情報ネットワーク上の個人・役割（アイデアを生成し、他者を模倣または自分で探索する主体）。
- v(S) = 「そのメンバー S だけで組織を構成し、ネットワーク構造 G[S] のもとで探索／活用ダイナミクスを回したとき、
  最終的にどの程度の水準のアイデア（フィットネス）に到達できるか」という期待性能を表す。
- 実務的には、「どの小集団 S が、どのネットワーク構造のもとで最も高い問題解決力を発揮しうるか」を比較するための数値化された指標として扱う。
